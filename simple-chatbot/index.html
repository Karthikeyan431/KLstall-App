<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Standalone AI Chatbot</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    #chat { width: 100%; max-width: 400px; margin: auto; }
    .msg { padding: 10px; border-radius: 10px; margin: 5px 0; }
    .user { background: #FF66C4; color: white; text-align: right; }
    .bot { background: #eee; color: black; text-align: left; }
    input { width: 80%; padding: 10px; border-radius: 8px; }
    button { padding: 10px; background: #FF66C4; color: white; border: none; border-radius: 8px; }
  </style>
</head>
<body>

  <h2>Standalone AI Chatbot</h2>

  <div id="chat"></div>

  <br>

  <input id="msgInput" placeholder="Type message..." />
  <button onclick="sendMessage()">Send</button>

<script>
  const chatBox = document.getElementById('chat');

  function addMessage(role, text) {
    const div = document.createElement("div");
    div.className = `msg ${role}`;
    div.innerText = text;
    chatBox.appendChild(div);
  }

  async function sendMessage() {
    const input = document.getElementById("msgInput");
    const text = input.value.trim();
    if (!text) return;

    addMessage("user", text);
    input.value = "";

    try {
      const res = await fetch(
        "https://alayipoqgverqdvjmskj.supabase.co/functions/v1/chatbot",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text }),
        }
      );

      const data = await res.json();
      addMessage("bot", data.reply || "No response");
    } catch (error) {
      addMessage("bot", "Network error");
    }
  }
</script>

</body>
</html>
